(this["webpackJsonpweathering-image"]=this["webpackJsonpweathering-image"]||[]).push([[0],{1:function(e,t,a){},4:function(e,t,a){e.exports=a(9)},9:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(3),l=a.n(r);a(1);var h=function(e){return i.a.createElement("header",null,i.a.createElement("h1",null,document.title),i.a.createElement("p",null,"\ub514\uc9c0\ud138 \ud48d\ud654\ub97c \uc88b\uc544\ud558\uc2dc\ub294 \uc5ec\ub7ec\ubd84\uc744 \uc704\ud55c \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4. \uc800\ud654\uc9c8\uc758 \uc774\ubbf8\uc9c0\ub97c \uc27d\uace0 \ube60\ub974\uac8c \ub9cc\ub4e4\uc5b4 \ubcf4\uc138\uc694!"))};const g="https://github.com/ogu59/weathering-image";var o=function(e){return i.a.createElement("footer",null,i.a.createElement("hr",null),i.a.createElement("p",null,"GitHub: ",i.a.createElement("a",{href:g},g)))};function s(e){return new Promise(t=>{const a=new Image;a.onload=()=>{t(a)},a.src=e})}async function c(e,t){if(!e)return"";const a=await s(e),n=a.width,i=a.height,r=.5*(1-t/100)+.5;let l=function(e,t,a,n){const i=document.createElement("canvas");i.width=a,i.height=n;const r=i.getContext("2d");return r.fillRect(0,0,i.width,i.height),r.drawImage(e,0,0,i.width,i.height),i.toDataURL("image/jpeg",t)}(a,(100-t)/100,n*r,i*r);return l=function(e,t,a,n,i,r){const l=document.createElement("canvas");l.width=i,l.height=r;const h=l.getContext("2d");return h.drawImage(e,0,0,l.width,l.height),h.globalCompositeOperation="overlay",h.fillStyle="black",h.globalAlpha=t,h.fillRect(0,0,l.width,l.height),h.globalCompositeOperation="color-burn",h.fillStyle="rgb(230, 225, 170)",h.globalAlpha=a,h.fillRect(0,0,l.width,l.height),l.toDataURL("image/jpeg",n)}(await s(l),t/100*.1,t/100,(100-t)/100,n,i),l}class d extends i.a.Component{constructor(e){super(e),this.state={degrade:0,degradedImageData:null,imageDataCache:null},this.loadSampleImage()}handleImageLoad(e){(async function(e,t){if(!e)return"";const a=await s(e),n=document.createElement("canvas"),i=a.width*a.height,r=t<i?Math.sqrt(t/i):1;n.width=parseInt(a.width*r),n.height=parseInt(a.height*r);const l=n.getContext("2d");return l.fillStyle="white",l.fillRect(0,0,n.width,n.height),l.drawImage(a,0,0,n.width,n.height),n.toDataURL("image/jpeg",1)})(e,225e4).then(e=>{const t=new Map;t.set(0,e),this.setState({degrade:0,degradedImageData:e,imageDataCache:t},()=>this.showDegradedImage(this.state.degrade))})}handleDragOver(e){e.preventDefault()}handleDrop(e){if(e.preventDefault(),"file"===e.dataTransfer.items[0].kind){const t=e.dataTransfer.items[0].getAsFile();this.loadImage(t)}}handleQualityChange(e){this.setState({degrade:Number(e.target.value)},()=>this.showDegradedImage(this.state.degrade))}showDegradedImage(e){const t=this.state.imageDataCache.get(e);t?this.setState({degradedImageData:t}):c(this.state.imageDataCache.get(0),e).then(t=>{const a=new Map(this.state.imageDataCache);a.set(e,t),this.setState({degradedImageData:t,imageDataCache:a})})}loadSampleImage(){const e=new Image;e.onload=()=>{const t=document.createElement("canvas");t.width=400,t.height=400;t.getContext("2d").drawImage(e,0,0,t.width,t.height),this.handleImageLoad(t.toDataURL("Image/jpeg"),1)},e.src=document.URL+"/sample.png"}loadImage(e){if(!e)return;const t=new FileReader;t.onload=e=>this.handleImageLoad(e.target.result),t.readAsDataURL(e)}showImageSelector(){document.getElementById("imageSelector").click()}render(){return i.a.createElement("section",{className:"imageEditor",onDragOver:e=>this.handleDragOver(e),onDrop:e=>this.handleDrop(e)},i.a.createElement("div",{className:"buttonContainer"},i.a.createElement("input",{type:"file",id:"imageSelector",accept:"image/*",onChange:e=>this.loadImage(e.target.files[0])}),i.a.createElement("input",{type:"button",value:"\uc774\ubbf8\uc9c0 \ubd88\ub7ec\uc624\uae30",onClick:()=>this.showImageSelector()})),i.a.createElement("img",{className:"image",alt:"\ubd88\ub7ec\uc628 \uc774\ubbf8\uc9c0",src:this.state.degradedImageData}),i.a.createElement("input",{type:"range",min:"0",max:"100",step:"5",value:this.state.degrade,onChange:e=>this.handleQualityChange(e)}))}}var m=d;function u(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(h,null),i.a.createElement(m,null),i.a.createElement(o,null))}l.a.render(i.a.createElement(u,null),document.getElementById("root"))}},[[4,1,2]]]);
//# sourceMappingURL=main.f02bba3b.chunk.js.map